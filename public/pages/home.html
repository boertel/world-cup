

<div ng-controller="OldGamesController">
    <div class="pure-g">
        <div class="pure-u-1">
            <h2>Matches <small><a ng-if="games.length" ng-click="showPreviousGames = ! showPreviousGames">Show previous matches ({{ games.length }})</a></small></h2>
        </div>
    </div>
    <div widget-games ng-show="showPreviousGames"></div>
</div>

<div ng-controller="GamesController" widget-games></div>

<div class="pure-g">
    <div class="pure-u-1-2 leaderboard" ng-controller="LeaderboardController">
        <h2>Leaderboard</h2>
        <ul ng-repeat="user in users" widget-leaderboard></ul>
    </div>

    <div class="pure-u-1-2 leaderboard" ng-controller="FriendsLeaderboardController">
        <h2>Friends Leaderboard</h2>
        <ul ng-repeat="user in users" widget-leaderboard></ul>
    </div>
</div>

<script type="text/ng-template" id="widget-leaderboard.html">
    <li>{{ user.rank }}. <a href="{{ user.link }}" target="_blank">{{ user.name }}</a><div class="right">{{ user.points }}</div></li>
</script>

<script type="text/ng-template" id="widget-games.html">
    <div class="pure-g game" ng-repeat="game in games | orderBy:'time' | groupBy:'day'" data-href="#/games/{{ game.id }}" ng-class="{saved:game.bet, separator:game.separator}">
        <div class="pure-u-1-8 date">
           <time datetime="{{ game.time }}"></time>
        </div>
        <div class="pure-u-1-3">
            <div class="left flag">
                <img ng-src="images/flags/competitor-{{ game.competitorA.id }}.png">
            </div>
            <div class="left">
                {{ game.competitorA.name }}
            </div>
        </div>
        <div class="pure-u-1-6 center scores"></div>
        <div class="pure-u-1-3">
            <div class="right flag">
                <img ng-src="images/flags/competitor-{{ game.competitorB.id }}.png">
            </div>
            <div class="right">
                {{ game.competitorB.name }}
            </div>
        </div>
    </div>
</script>
