

<div ng-controller="GamesController" widget-games></div>

<div class="pure-g">
    <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-1-2 leaderboard" ng-controller="LeaderboardController">
        <h2>Leaderboard</h2>
        <ul widget-leaderboard></ul>
    </div>

    <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-1-2 leaderboard" ng-controller="FriendsLeaderboardController">
        <h2>Friends Leaderboard</h2>
        <div class="ajax-loader" ng-if="waiting"></div>
        <ul widget-leaderboard></ul>
    </div>
</div>

<script type="text/ng-template" id="widget-leaderboard.html">
    <li ng-repeat="user in users" ng-class="{me: user.me}">{{ user.rank }}. <a href="{{ user.link }}" target="_blank">{{ user.name }}</a><div class="right">{{ user.points }}</div></li>
</script>

<script type="text/ng-template" id="widget-games.html">
    <div ng-repeat="day in days" class="games-group">
        <div class="pure-g separator" ng-click="showPast(day.dayCss)">
            <div class="pure-u-1 date">
                {{ day.day|date: 'EEEE dd MMMM' }}
                <span ng-repeat="game in day.games" class="little-score {{ game.bet.cssClass() }}"></span>
            </div>
        </div>
        <div ng-repeat="game in day.games">
            <div class="pure-g game period-{{ game.day }} {{ game.bet.cssClass() }}" title="{{ game.local|date: 'short' }}" data-href="#/games/{{ game.id }}" ng-class="{saved:game.bet.id, past:game.past()}">
                <div class="pure-u-1 pure-u-md-1-8 pure-u-lg-1-8">
                    <div class="pure-g subtitle">
                        <div class="pure-u-1-4 pure-u-md-1 pure-u-lg-1">at {{ game.local|date:'HH:mm' }}</div>
                        <div class="pure-u-1-2 pure-u-md-1 pure-u-lg-1 group">{{ game.group.name }}</div>
                    </div>
                </div>
                <div class="pure-u-1-3 pure-u-md-1-4 pure-u-lg-1-4">
                    <div class="left flag">
                        <img ng-src="images/flags/competitor-{{ game.competitorA.id }}.png">
                    </div>
                    <div class="left">
                        {{ game.competitorA.name }}
                    </div>
                </div>
                <div class="pure-u-1-3 pure-u-md-1-3 pure-u-lg-1-3 center scores">
                    <div class="bet-score">{{ game.bet.score_a }} - {{ game.bet.score_b }}</div>
                    <div class="game-score" ng-class="{hidden: !game.hasScore}">{{ game.score_a }} - {{ game.score_b }}</div>
                </div>
                <div class="pure-u-1-3 pure-u-md-1-4 pure-u-lg-1-4">
                    <div class="right flag">
                        <img ng-src="images/flags/competitor-{{ game.competitorB.id }}.png">
                    </div>
                    <div class="right">
                        {{ game.competitorB.name }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
