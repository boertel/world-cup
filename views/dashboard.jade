extends layout

block header
    div(ng-controller="UserController")
            div.pure-menu.pure-menu-open.pure-menu-horizontal
                a.pure-menu-heading(href="#/") World Cup 2014
                ul
                    li
                        a(href="#/", ng-class="{'pure-menu-selected':isActive('/')}") Matches
                    li
                        a(href="#/leaderboard", ng-class="{'pure-menu-selected':isActive('/leaderboard')}") Leaderboard
                a.pure-menu-heading.right.avatar(href="#/user/me")
                    img(ng-src="{{ user.picture }}")
                a.pure-menu-heading.right.profile-points(href="#/user/me") {{ user.points }} points

block notification
    div#notification(ng-controller="NotificationController")
        div.notification(ng-repeat="notification in notifications", class="{{ notification.type }}")
            div.page-width
                p {{ notification.message }}

block content

block script
    script(type="text/ng-template", id="widget-game.html").
        <div id="game-{{ game.id }}"
             class="pure-g game period-{{ game.day }} {{ game.bet.cssClass() }}"
             title="{{ game.local|date: 'short' }}"
             data-href="#/games/{{ game.id }}"
             ng-class="{saved:game.bet.id, past:day.past}">
            <div class="pure-u-1 pure-u-md-1-8 pure-u-lg-1-8">
                <div class="pure-g subtitle">
                    <div class="pure-u-1-4 pure-u-md-1 pure-u-lg-1">at {{ game.local|date:'HH:mm' }}</div>
                    <div class="pure-u-1-2 pure-u-md-1 pure-u-lg-1 group">{{ game.group.name }}</div>
                </div>
            </div>
            <div class="pure-u-1-3 pure-u-md-1-4 pure-u-lg-1-4">
                <div class="left flag">
                    <img ng-src="images/flags/competitor-{{ game.competitorA.id }}.png">
                </div>
                <div class="left">
                    {{ game.competitorA.name }}
                </div>
            </div>
            <div class="pure-u-1-3 pure-u-md-1-3 pure-u-lg-1-3 center scores">
                <div class="bet-score">{{ game.bet.score_a }} - {{ game.bet.score_b }}</div>
                <div class="game-score" ng-class="{hidden: !game.hasScore}">{{ game.score_a }} - {{ game.score_b }}</div>
            </div>
            <div class="pure-u-1-3 pure-u-md-1-4 pure-u-lg-1-4">
                <div class="right flag">
                    <img ng-src="images/flags/competitor-{{ game.competitorB.id }}.png">
                </div>
                <div class="right">
                    {{ game.competitorB.name }}
                </div>
            </div>
        </div>

    script(type="text/ng-template", id="widget-legend.html").
        <div class="pure-g legend">
            <div class="pure-u-1">
                <em>Legend:</em>
                <ul>
                    <li>
                        <span class="little-score"></span>: You didn't bet on this game
                    </li>
                    <li>
                        <span class="little-score saved"></span>: You did bet on this game
                    </li>
                    <li>
                        <span class="little-score lost"></span>: 0 points
                    </li>
                    <li>
                        <span class="little-score win"></span>: +20 points
                    </li>
                    <li>
                        <span class="little-score perfect"></span>: +50 points
                    </li>
                </ul>
            </div>
        </div>

    script(src="/js/models.js")
    script(src="/js/app.js")
    script(src="/js/filters.js")
    script(src="/js/directives.js")
    script(src="/js/factories.js")
    script(src="/js/controllers.js")
